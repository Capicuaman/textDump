<button onclick="openChat()">Chat</button>

<script>
function openChat() {
  const chatWindow = window.open("", "chatWindow", "width=400,height=600");
  chatWindow.document.write(`
    <html>
    <head><title>Chat</title></head>
    <body>
      <div id="chatBox" style="height:500px;overflow:auto;border:1px solid #ccc;"></div>
      <input id="chatInput" type="text" style="width:80%;" />
      <button onclick="sendMessage()">Send</button>
      <script>
        async function sendMessage() {
          const msg = document.getElementById('chatInput').value;
          const response = await fetch('https://<your-n8n>/webhook/<your-endpoint>', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message: msg })
          });
          const data = await response.json();
          document.getElementById('chatBox').innerHTML += '<p><b>You:</b> ' + msg + '</p>';
          document.getElementById('chatBox').innerHTML += '<p><b>Bot:</b> ' + data.output + '</p>';
        }
      <\/script>
    </body>
    </html>
  `);
}
</script>
